<!DOCTYPE html>
<!-- This site was created with Hugo Blox. https://hugoblox.com -->
<!-- Last Published: September 11, 2024 --><html lang="en-us" >


<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  
  
    <meta name="generator" content="Hugo Blox Builder 5.9.7" />
  

  
  












  
  










  







  
  

  
  
  

  
  

  
  

  

  <link rel="stylesheet" href="/css/vendor-bundle.min.26c458e6907dc03073573976b7f4044e.css" media="print" onload="this.media='all'">

  
  
  
    
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1.9.4/css/academicons.min.css" integrity="sha512-IW0nhlW5MgNydsXJO40En2EoCkTTjZhI3yuODrZIc8cQ4h1XcF53PsqDHa09NqnkXuIe0Oiyyj171BqZFwISBw==" crossorigin="anonymous" media="print" onload="this.media='all'">
    

    
    
    
    
      
      
    
    
    

    
    
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.7.1/dist/leaflet.min.css" integrity="" crossorigin="anonymous" media="print" onload="this.media='all'">
    

    

    
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      
        
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
  

  
  
  
  
  
  
  <link rel="stylesheet" href="/css/wowchemy.88eac37c0928c6d9f75a4489e6f10b4a.css" />

  
  
  

  
  
  
  
  
  
  
    
    
    <link rel="stylesheet" href="/css/libs/chroma/github-light.min.css" title="hl-light" media="print" onload="this.media='all'" >
    <link rel="stylesheet" href="/css/libs/chroma/dracula.min.css" title="hl-dark" media="print" onload="this.media='all'" disabled>
  

  
  



























  
  
  






  <meta name="author" content="Hans Rutger Bosker" />





  

<meta name="description" content="This script creates an F0 continuum for two segmentally matching words (e.g., SUBject vs. subJECT). First, it matches the two words in duration and then interpolates the F0 contour linearly in 11 steps (steps 1 and 11 being the original contours), controlling for intensity." />



<link rel="alternate" hreflang="en-us" href="https://hrbosker.github.io/resources/scripts/interpolate-f0/" />
<link rel="canonical" href="https://hrbosker.github.io/resources/scripts/interpolate-f0/" />



  <link rel="manifest" href="/manifest.webmanifest" />



<link rel="icon" type="image/png" href="/media/icon_huae2b00520e03f5ba379b883d5ffe682c_34272_32x32_fill_lanczos_center_3.png" />
<link rel="apple-touch-icon" type="image/png" href="/media/icon_huae2b00520e03f5ba379b883d5ffe682c_34272_180x180_fill_lanczos_center_3.png" />

<meta name="theme-color" content="#1565c0" />










  
  






<meta property="twitter:card" content="summary" />
<meta property="twitter:image" content="https://hrbosker.github.io/media/logo_hu4ee931c5040e3d0fbcac8149a377b250_283935_300x300_fit_lanczos_3.png" />



  

<meta property="og:type" content="article" />
<meta property="og:site_name" content="SPEAC | Hans Rutger Bosker" />
<meta property="og:url" content="https://hrbosker.github.io/resources/scripts/interpolate-f0/" />
<meta property="og:title" content="Interpolate F0 continuum | SPEAC | Hans Rutger Bosker" />
<meta property="og:description" content="This script creates an F0 continuum for two segmentally matching words (e.g., SUBject vs. subJECT). First, it matches the two words in duration and then interpolates the F0 contour linearly in 11 steps (steps 1 and 11 being the original contours), controlling for intensity." /><meta property="og:image" content="https://hrbosker.github.io/media/logo_hu4ee931c5040e3d0fbcac8149a377b250_283935_300x300_fit_lanczos_3.png" /><meta property="og:locale" content="en-us" />

  
  







  




  
  
  

  
  

  


  
  <title>Interpolate F0 continuum | SPEAC | Hans Rutger Bosker</title>

  
  
  
  











</head>


<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" class="page-wrapper   " data-wc-page-id="de89edadd0773becf17145c9a48b8264" >

  
  
  
  
  
  
  
  
  
  <script src="/js/wowchemy-init.min.4fef3e534144e9903491f0cc6527eccd.js"></script>

  


<aside class="search-modal" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#" aria-label="Close"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search" class="form-control"
        aria-label="Search...">
        
      </div>

      
      

      

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>



  <div class="page-header header--fixed">
  
  
  
  
  











  


<header>
  <nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
    <div class="container-xl">

      
      <div class="d-none d-lg-inline-flex">
        <a class="navbar-brand" href="/"><img src="/media/logo_hu4ee931c5040e3d0fbcac8149a377b250_283935_0x70_resize_lanczos_3.png" alt="SPEAC | Hans Rutger Bosker"
            
            ></a>
      </div>
      

      
      <button type="button" class="navbar-toggler" data-toggle="collapse"
              data-target="#navbar-content" aria-controls="navbar-content" aria-expanded="false" aria-label="Toggle navigation">
      <span><i class="fas fa-bars"></i></span>
      </button>
      

      
      <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
        <a class="navbar-brand" href="/"><img src="/media/logo_hu4ee931c5040e3d0fbcac8149a377b250_283935_0x70_resize_lanczos_3.png" alt="SPEAC | Hans Rutger Bosker"
          
          ></a>
      </div>
      

      
      
      <div class="navbar-collapse main-menu-item collapse justify-content-end" id="navbar-content">

        
        <ul class="navbar-nav d-md-inline-flex">
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
          

          <li class="nav-item">
            <a class="nav-link " href="/research"><span>Research</span></a>
          </li>

          
          

          

          
          
          

          

          
          
          
          

          
            
              
              
            
            
          

          <li class="nav-item">
            <a class="nav-link " href="/news"><span>News</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
          

          <li class="nav-item">
            <a class="nav-link " href="/people"><span>People</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
          

          <li class="nav-item">
            <a class="nav-link " href="/publication"><span>Publications</span></a>
          </li>

          
          

          
          <li class="nav-item dropdown">
            <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"><span>Resources</span><span class="caret"></span>
            </a>
            <div class="dropdown-menu">
              
                <a class="dropdown-item" href="/resources/corpora/"><span>Corpora</span></a>
              
                <a class="dropdown-item" href="/resources/tools/"><span>Research tools</span></a>
              
                <a class="dropdown-item" href="/resources/scripts/"><span>Scripts</span></a>
              
                <a class="dropdown-item" href="/resources/how-to/"><span>How to's</span></a>
              
                <a class="dropdown-item" href="/resources/course-materials/"><span>Course materials</span></a>
              
                <a class="dropdown-item" href="/resources/other-resources/"><span>Other resources</span></a>
              
            </div>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
          

          <li class="nav-item">
            <a class="nav-link " href="/demos"><span>Demos</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
          

          <li class="nav-item">
            <a class="nav-link " href="/contact"><span>Contact</span></a>
          </li>

          
          

        

          
        </ul>
      </div>

      <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">

        
        
          
        

        
        
        
        <li class="nav-item">
          <a class="nav-link js-search" href="#" aria-label="Search"><i class="fas fa-search" aria-hidden="true"></i></a>
        </li>
        

        
        
        

        
        

      </ul>

    </div>
  </nav>
</header>


  </div>

  <div class="page-body">
    
    
    

    




<div class="container-fluid docs">
  <div class="row flex-xl-nowrap">
    <div class="col-12 col-md-3 col-xl-2 docs-sidebar">
      <form class="docs-search d-flex align-items-center">
  <button class="btn docs-toggle d-md-none p-0 mr-md-3 w-100" type="button" data-toggle="collapse" data-target="#docs-nav" aria-controls="docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    <div class="d-flex">
      <span class="d-md-none pl-1 flex-grow-1 text-left overflow-hidden">
        
        
          Scripts
        
      </span>
      <span><i class="fas fa-chevron-down"></i></span>
    </div>
  </button>

  
  <button class="form-control sidebar-search js-search d-none d-md-flex">
    <i class="fas fa-search pr-2"></i>
    <span class="sidebar-search-text">Search...</span>
    <span class="sidebar-search-shortcut">/</span>
  </button>
  
</form>

<nav class="collapse docs-links" id="docs-nav">
  
  
  
  
  
  

  
  
    

    
      

      <ul class="nav docs-sidenav">
        <li><a href="/resources/"><i class="fas fa-arrow-left pr-1"></i>Resources</a></li>
      </ul>

      
      
        
          
        
      


  
    
    
    
    
      
    
    

    
      <div class="docs-toc-item">
        <a class="docs-toc-link " href="/resources/scripts/">Scripts</a>
    
      
        <ul class="nav docs-sidenav">
      


  <li class=""><a href="/resources/scripts/save-all/">Save all</a></li>



  <li class=""><a href="/resources/scripts/annotate/">Annotate</a></li>



  <li class=""><a href="/resources/scripts/batch-processing/">Batch processing</a></li>



  <li class=""><a href="/resources/scripts/move-to-zero-crossings/">Move to zero-crossings</a></li>



  <li class=""><a href="/resources/scripts/manipulate-itd-iid/">Manipulate ITD/IID</a></li>



  <li class="active"><a href="/resources/scripts/interpolate-f0/">Interpolate F0 continuum</a></li>



  <li class=""><a href="/resources/scripts/manipulate-formants/">Manipulate formants</a></li>



  <li class=""><a href="/resources/scripts/transplant-intensity-contour/">Transplant intensity contour</a></li>



  <li class=""><a href="/resources/scripts/dynamic-time-warping/">Dynamic Time Warping</a></li>

      
        </ul>
      
    

    
      </div>
    

    
  
</nav>

    </div>

    
    
    <div class="d-none d-xl-block col-xl-2 docs-toc">
      












      <ul class="nav toc-top">
        <li><a href="#" id="back_to_top" class="docs-toc-title">Contents</a></li>
      </ul>

      <nav id="TableOfContents"></nav>

      











    </div>
    

    <main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 docs-content" role="main">

      <div class="docs-article-container">
        
      </div>

      
      
      

      <div class="docs-article-container">
        
        <h1>Interpolate F0 continuum</h1>

        <article class="article-style">

          
          

          <p>This script creates an F0 continuum for two segmentally matching words (e.g., <em>SUBject</em> vs. <em>subJECT</em>). First, it matches the two words in duration and then interpolates the F0 contour linearly in 11 steps (steps 1 and 11 being the original contours), controlling for intensity.</p>
<blockquote>
<p>You can also <a href="../interpolate-F0.praat">download the script</a> as a .praat file.</p>
</blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">#____________________________________ HEADER __________________________________####
</span></span><span class="line"><span class="cl"># date:         31.01.2023, run in Praat 6.2.12 on Windows 11
</span></span><span class="line"><span class="cl"># author:       Ronny Bujok (adapted from Hans Rutger Bosker)
</span></span><span class="line"><span class="cl"># email:        Ronny.Bujok@mpi.nl
</span></span><span class="line"><span class="cl"># filename:     F0_stress continuum_interpolation.praat
</span></span><span class="line"><span class="cl"># project:      Audiovisual Perception of Lexical Stress
</span></span><span class="line"><span class="cl"># license:		CC BY-NC 4.0
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">####################################################################################################################
</span></span><span class="line"><span class="cl"># This script takes recordings of segmentally identical, disyllabic minimal stress pairs with lexical stress on the first 
</span></span><span class="line"><span class="cl"># (strong-weak; SW) or second (weak-strong; WS) syllable (e.g., VOORnaam vs. voorNAAM) and interpolates their F0-contours linearly. 
</span></span><span class="line"><span class="cl"># The manipulated F0-contours are applied to the SW recording to create an F0-based lexical stress continuum.
</span></span><span class="line"><span class="cl"># Duration and Intensity are set to mean, ambiguous values.
</span></span><span class="line"><span class="cl">#
</span></span><span class="line"><span class="cl"># This script requires minimal pairs to match in their name. Stress pattern in input files is denoted with &#34;_sw&#34; or &#34;_ws&#34; 
</span></span><span class="line"><span class="cl"># (e.g., voornaam_sw.wav &amp; voornaam_ws.wav). No other underscore characters are allowed.
</span></span><span class="line"><span class="cl"># Textgrids for each recording are required, with boundaries at word onset, second syllable onset and word offset.
</span></span><span class="line"><span class="cl">#
</span></span><span class="line"><span class="cl"># Note that the parameters for pitch estimation are set to match a male voice. When working with a female voice,
</span></span><span class="line"><span class="cl"># please adjust the arguments of the functions &#34;Lengthen (overlap-add)&#34; and &#34;To Manipulation&#34;.
</span></span><span class="line"><span class="cl">####################################################################################################################
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># Define input and output directory
</span></span><span class="line"><span class="cl">input_directory$ = &#34;C:\input folder&#34;
</span></span><span class="line"><span class="cl">output_directory$= &#34;C:\output folder&#34;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># create file list of all files with the ending &#34;_sw.wav&#34; (just sound files, one per minimal pair (sw))
</span></span><span class="line"><span class="cl">Create Strings as file list... list &#39;input_directory$&#39;\*_sw.wav
</span></span><span class="line"><span class="cl">n = Get number of strings
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># _________________________________ CREATE FILELIST ____________________________________________________
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># create list again because it removes itself after every iteration
</span></span><span class="line"><span class="cl">for x from 1 to n
</span></span><span class="line"><span class="cl">	Create Strings as file list... list &#39;input_directory$&#39;\*_sw.wav
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># get only the word name without extension or stress identifier (sw or ws)
</span></span><span class="line"><span class="cl">	select Strings list
</span></span><span class="line"><span class="cl">	current_file$ = Get string... x
</span></span><span class="line"><span class="cl">	idx = rindex (current_file$, &#34;_&#34;)
</span></span><span class="line"><span class="cl">	word$ = left$(current_file$,idx-1)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">#_____________________________________ DURATION ___________________________________________________________
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># To interpolate F0 contours, recordings must be of equal length. So duration must be manipulated first. 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">#---------------------------------- get values from SW word ---------------------------------------------
</span></span><span class="line"><span class="cl"># open SW word and convert to mono
</span></span><span class="line"><span class="cl">		wavfile_sw$ = &#34;&#39;word$&#39;_sw&#34;
</span></span><span class="line"><span class="cl">		Read from file... &#39;input_directory$&#39;\&#39;wavfile_sw$&#39;.Textgrid
</span></span><span class="line"><span class="cl">		Read from file... &#39;input_directory$&#39;\&#39;wavfile_sw$&#39;.wav
</span></span><span class="line"><span class="cl">		Convert to mono
</span></span><span class="line"><span class="cl">		Rename: &#34;mono_sw&#34;
</span></span><span class="line"><span class="cl">		wav_sw_id = selected()
</span></span><span class="line"><span class="cl"># select the mono file and the corresponding textgrid and extract all intervals
</span></span><span class="line"><span class="cl">		selectObject: &#34;TextGrid &#39;wavfile_sw$&#39;&#34;
</span></span><span class="line"><span class="cl">		plusObject: &#34;Sound mono_sw&#34;
</span></span><span class="line"><span class="cl">		Extract all intervals: 1, &#34;no&#34;
</span></span><span class="line"><span class="cl"># select the second interval (first syllable) and get the total duration and the intensity	
</span></span><span class="line"><span class="cl">		select (wav_sw_id+2)  
</span></span><span class="line"><span class="cl">		sw_dur1= Get total duration
</span></span><span class="line"><span class="cl">		sw_int1= Get intensity (dB)
</span></span><span class="line"><span class="cl">		Rename: &#34;sw_1&#34;
</span></span><span class="line"><span class="cl"># select the third interval (second syllable) and get the total duration and the intensity		
</span></span><span class="line"><span class="cl">		select (wav_sw_id+3)
</span></span><span class="line"><span class="cl">		sw_dur2= Get total duration
</span></span><span class="line"><span class="cl">		sw_int2= Get intensity (dB)
</span></span><span class="line"><span class="cl">		Rename: &#34;sw_2&#34;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># select and rename the first and last interval (silences) for future reference, to concatenate the final audio
</span></span><span class="line"><span class="cl">		select (wav_sw_id+1)
</span></span><span class="line"><span class="cl">		Rename: &#34;pre_silence_sw&#34;
</span></span><span class="line"><span class="cl">		select (wav_sw_id+4)
</span></span><span class="line"><span class="cl">		Rename: &#34;post_silence_sw&#34;
</span></span><span class="line"><span class="cl">		
</span></span><span class="line"><span class="cl">#---------------------------------- get values from WS word -----------------------------------------
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># open WS word and convert to mono		
</span></span><span class="line"><span class="cl">		wavfile_ws$ = &#34;&#39;word$&#39;_ws&#34;
</span></span><span class="line"><span class="cl">		Read from file... &#39;input_directory$&#39;\&#39;wavfile_ws$&#39;.Textgrid
</span></span><span class="line"><span class="cl">		Read from file... &#39;input_directory$&#39;\&#39;wavfile_ws$&#39;.wav
</span></span><span class="line"><span class="cl">		Convert to mono
</span></span><span class="line"><span class="cl">		Rename: &#34;mono_ws&#34;
</span></span><span class="line"><span class="cl">		wav_ws_id = selected()
</span></span><span class="line"><span class="cl"># select the mono file and the corresponding textgrid and extract all intervals		
</span></span><span class="line"><span class="cl">		selectObject: &#34;TextGrid &#39;wavfile_ws$&#39;&#34;
</span></span><span class="line"><span class="cl">		plusObject: &#34;Sound mono_ws&#34;
</span></span><span class="line"><span class="cl">		Extract all intervals: 1, &#34;no&#34;
</span></span><span class="line"><span class="cl"># select the second interval (first syllable) and get the total duration and the intensity			
</span></span><span class="line"><span class="cl">		select (wav_ws_id+2)
</span></span><span class="line"><span class="cl">		ws_dur1= Get total duration
</span></span><span class="line"><span class="cl">		ws_int1= Get intensity (dB)
</span></span><span class="line"><span class="cl">		Rename: &#34;ws_1&#34;	
</span></span><span class="line"><span class="cl"># select the third interval (second syllable) and get the total duration and the intensity		
</span></span><span class="line"><span class="cl">		select (wav_ws_id+3)
</span></span><span class="line"><span class="cl">		ws_dur2= Get total duration
</span></span><span class="line"><span class="cl">		ws_int2= Get intensity (dB)
</span></span><span class="line"><span class="cl">		Rename: &#34;ws_2&#34;	
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">#---------------------------------- Manipulate duration ------------------------------------------
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># Set the duration of syllable 1 of the SW word to the average, ambiguous duration
</span></span><span class="line"><span class="cl">		select Sound sw_1
</span></span><span class="line"><span class="cl">		targetdur_1 = ((sw_dur1+ws_dur1)/2)
</span></span><span class="line"><span class="cl">		Lengthen (overlap-add)... 75 250 (targetdur_1/sw_dur1)
</span></span><span class="line"><span class="cl">		Rename: &#34;sw_1_durmatched&#34;			
</span></span><span class="line"><span class="cl"># Set the duration of syllable 2 of the SW word to the average, ambiguous duration
</span></span><span class="line"><span class="cl">        select Sound sw_2
</span></span><span class="line"><span class="cl">		targetdur_2 = ((sw_dur2+ws_dur2)/2)
</span></span><span class="line"><span class="cl">		Lengthen (overlap-add)... 75 250 (targetdur_2/sw_dur2)
</span></span><span class="line"><span class="cl">		Rename: &#34;sw_2_durmatched&#34;	
</span></span><span class="line"><span class="cl">		
</span></span><span class="line"><span class="cl"># Set the duration of syllable 1 of the WS word to the average, ambiguous duration
</span></span><span class="line"><span class="cl">        select Sound ws_1
</span></span><span class="line"><span class="cl">		Lengthen (overlap-add)... 75 250 (targetdur_1/ws_dur1)
</span></span><span class="line"><span class="cl">		Rename: &#34;ws_1_durmatched&#34;		
</span></span><span class="line"><span class="cl"># Set the duration of syllable 2 of the WS word to the average, ambiguous duration
</span></span><span class="line"><span class="cl">        select Sound ws_2
</span></span><span class="line"><span class="cl">		Lengthen (overlap-add)... 75 250 (targetdur_2/ws_dur2)
</span></span><span class="line"><span class="cl">		Rename: &#34;ws_2_durmatched&#34;
</span></span><span class="line"><span class="cl">		
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># Concatenate duration-manipulated SW word
</span></span><span class="line"><span class="cl">		select Sound sw_1_durmatched
</span></span><span class="line"><span class="cl">		plusObject: &#34;Sound sw_2_durmatched&#34;
</span></span><span class="line"><span class="cl">		Concatenate recoverably
</span></span><span class="line"><span class="cl">		select Sound chain
</span></span><span class="line"><span class="cl">		Rename: &#34;durmatched_sw&#34;
</span></span><span class="line"><span class="cl"># Concatenate duration-manipulated WS word
</span></span><span class="line"><span class="cl">        select Sound ws_1_durmatched
</span></span><span class="line"><span class="cl">		plusObject: &#34;Sound ws_2_durmatched&#34;
</span></span><span class="line"><span class="cl">		Concatenate recoverably
</span></span><span class="line"><span class="cl">		select Sound chain
</span></span><span class="line"><span class="cl">		Rename: &#34;durmatched_ws&#34;
</span></span><span class="line"><span class="cl">		
</span></span><span class="line"><span class="cl"># save TextGrid with the boundary between the syllables. Necessary for intensity manipulation
</span></span><span class="line"><span class="cl">		select TextGrid chain
</span></span><span class="line"><span class="cl">		Rename: &#34;syl_boundary&#34;
</span></span><span class="line"><span class="cl">		
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		
</span></span><span class="line"><span class="cl">#__________________________________________ F0 INTERPOLATION ________________________________________________
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># Extract the pitch tiers
</span></span><span class="line"><span class="cl">		select Sound durmatched_sw
</span></span><span class="line"><span class="cl">		s1_dur = Get total duration
</span></span><span class="line"><span class="cl">		To Manipulation... 0.01 50 300
</span></span><span class="line"><span class="cl">		Extract pitch tier
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		select Sound durmatched_ws
</span></span><span class="line"><span class="cl">		s2_dur = Get total duration
</span></span><span class="line"><span class="cl">		To Manipulation... 0.01 50 300
</span></span><span class="line"><span class="cl">		Extract pitch tier
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># create 10 ms time bins for interpolation
</span></span><span class="line"><span class="cl">		timebinsize = 0.01
</span></span><span class="line"><span class="cl">		nbins = floor(s1_dur/timebinsize)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		for currentbin from 1 to &#39;nbins&#39;
</span></span><span class="line"><span class="cl">			currentbin_start = (currentbin*timebinsize)-timebinsize
</span></span><span class="line"><span class="cl">			currentbin_end = (currentbin*timebinsize)
</span></span><span class="line"><span class="cl">			currentbin_mid = (currentbin_start + currentbin_end)/2
</span></span><span class="line"><span class="cl">			select PitchTier durmatched_sw
</span></span><span class="line"><span class="cl">			currentbin_f0_s1 = Get value at time... currentbin_mid
</span></span><span class="line"><span class="cl">			f0_bin_s1 [currentbin] = currentbin_f0_s1
</span></span><span class="line"><span class="cl">			select PitchTier durmatched_ws
</span></span><span class="line"><span class="cl">			currentbin_f0_s2 = Get value at time... currentbin_mid
</span></span><span class="line"><span class="cl">			f0_bin_s2 [currentbin] = currentbin_f0_s2
</span></span><span class="line"><span class="cl">		endfor
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">#define number of steps for interpolation
</span></span><span class="line"><span class="cl">		nsteps = 11
</span></span><span class="line"><span class="cl">		step_ratio = 1/(&#39;nsteps&#39;-1)
</span></span><span class="line"><span class="cl">		# This means that...
</span></span><span class="line"><span class="cl">		#	the stepsize is 10% of the difference between SW and WS;
</span></span><span class="line"><span class="cl">		#	step 1 of the continuum is the original SW contour;
</span></span><span class="line"><span class="cl">		#	step 11 of the continuum is the original WS contour. 
</span></span><span class="line"><span class="cl">		
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># interpolate the pitch tiers 
</span></span><span class="line"><span class="cl">		for currentstep from 1 to &#39;nsteps&#39;
</span></span><span class="line"><span class="cl">			select PitchTier durmatched_sw
</span></span><span class="line"><span class="cl">			Copy... interpol_&#39;currentstep&#39;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">			# first remove all original F0 points
</span></span><span class="line"><span class="cl">			Remove points between... 0 &#39;s1_dur&#39;
</span></span><span class="line"><span class="cl">			
</span></span><span class="line"><span class="cl">			# now add a point for each time bin
</span></span><span class="line"><span class="cl">			for currentbin from 1 to &#39;nbins&#39;
</span></span><span class="line"><span class="cl">				currentbin_start = (currentbin*timebinsize)-timebinsize
</span></span><span class="line"><span class="cl">				currentbin_end = (currentbin*timebinsize)
</span></span><span class="line"><span class="cl">				currentbin_mid = (currentbin_start + currentbin_end)/2
</span></span><span class="line"><span class="cl">				currentbin_f0_s1 = f0_bin_s1 [currentbin]
</span></span><span class="line"><span class="cl">				currentbin_f0_s2 = f0_bin_s2 [currentbin]
</span></span><span class="line"><span class="cl">				currentbin_f0_diff = currentbin_f0_s1 - currentbin_f0_s2
</span></span><span class="line"><span class="cl">				currentbin_f0_ratio = currentbin_f0_diff * &#39;step_ratio&#39;
</span></span><span class="line"><span class="cl">				currentbin_f0_interpol = currentbin_f0_s1 - (currentbin_f0_ratio * (&#39;currentstep&#39;-1))
</span></span><span class="line"><span class="cl">				
</span></span><span class="line"><span class="cl">				Add point... &#39;currentbin_mid&#39; &#39;currentbin_f0_interpol&#39;
</span></span><span class="line"><span class="cl">			endfor
</span></span><span class="line"><span class="cl">			
</span></span><span class="line"><span class="cl"># select original audio (in this case SW recording) and replace the pitch contour
</span></span><span class="line"><span class="cl">			select Manipulation durmatched_sw
</span></span><span class="line"><span class="cl">			Copy... interpol_&#39;currentstep&#39;			
</span></span><span class="line"><span class="cl">			plusObject: &#34;PitchTier interpol_&#39;currentstep&#39;&#34;
</span></span><span class="line"><span class="cl">			Replace pitch tier
</span></span><span class="line"><span class="cl">			minusObject: &#34;PitchTier interpol_&#39;currentstep&#39;&#34;
</span></span><span class="line"><span class="cl">			Get resynthesis (overlap-add)
</span></span><span class="line"><span class="cl">			
</span></span><span class="line"><span class="cl">			interval_id = selected()
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">#__________________________________________ INTENSITY____________________________________________________
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># extract each syllable again for intensity manipulation
</span></span><span class="line"><span class="cl">			plusObject: &#34;TextGrid syl_boundary&#34;
</span></span><span class="line"><span class="cl">			Extract all intervals: 1, &#34;no&#34;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># set (average) target intensity per syllable
</span></span><span class="line"><span class="cl">            targetint_1 = ((sw_int1+ws_int1)/2) 
</span></span><span class="line"><span class="cl">            targetint_2 = ((sw_int2+ws_int2)/2) 
</span></span><span class="line"><span class="cl">			
</span></span><span class="line"><span class="cl"># adjust the intensities to an average/ambigous value
</span></span><span class="line"><span class="cl">			select (interval_id+1)
</span></span><span class="line"><span class="cl">			Scale intensity... targetint_1
</span></span><span class="line"><span class="cl">			Rename: &#34;final_syl_1&#34;
</span></span><span class="line"><span class="cl">			
</span></span><span class="line"><span class="cl">			select (interval_id+2)
</span></span><span class="line"><span class="cl">			Scale intensity... targetint_2
</span></span><span class="line"><span class="cl">			Rename: &#34;final_syl_2&#34;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">#______________________________________ CONCATENATE &amp; SAVE ______________________________________________
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># copy final segment of the recording (silence post word offset), so Praat concatenates in the correct order
</span></span><span class="line"><span class="cl">			select Sound post_silence_sw
</span></span><span class="line"><span class="cl">			Copy... post_silence_sw_copy
</span></span><span class="line"><span class="cl"># select remaining segments
</span></span><span class="line"><span class="cl">			plusObject: &#34;Sound pre_silence_sw&#34;
</span></span><span class="line"><span class="cl">			plusObject: &#34;Sound final_syl_1&#34;
</span></span><span class="line"><span class="cl">			plusObject: &#34;Sound final_syl_2&#34;
</span></span><span class="line"><span class="cl">			plusObject: &#34;post_silence_sw_copy&#34;
</span></span><span class="line"><span class="cl"># concatenate
</span></span><span class="line"><span class="cl">			Concatenate recoverably
</span></span><span class="line"><span class="cl">			select Sound chain
</span></span><span class="line"><span class="cl">			Rename: &#34;&#39;word$&#39;_step_&#39;currentstep&#39;&#34;
</span></span><span class="line"><span class="cl">			Save as WAV file... &#39;output_directory$&#39;\&#39;word$&#39;_step_&#39;currentstep&#39;.wav
</span></span><span class="line"><span class="cl">			select TextGrid chain
</span></span><span class="line"><span class="cl">			Save as text file... &#39;output_directory$&#39;\&#39;word$&#39;_step_&#39;currentstep&#39;.TextGrid
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		endfor
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	select all
</span></span><span class="line"><span class="cl">	Remove
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">endfor
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">################################################################################
</span></span><span class="line"><span class="cl"># End of script
</span></span><span class="line"><span class="cl">################################################################################
</span></span></code></pre></div>

        </article>

        





        



        
        
        <div class="article-widget">
          
<div class="post-nav">
  
  
  
  <div class="post-nav-item">
    <div class="meta-nav">Previous</div>
    <a href="/resources/scripts/manipulate-itd-iid/" rel="next">Manipulate ITD/IID</a>
  </div>
  
  
  
  <div class="post-nav-item">
    <div class="meta-nav">Next</div>
    <a href="/resources/scripts/manipulate-formants/" rel="prev">Manipulate formants</a>
  </div>
  
</div>

        </div>
        
      </div>

      <div class="body-footer">
        <p>Last updated on Jan 1, 0001</p>

        




        




        


      </div>

      <footer class="site-footer">

  












  
  
  
  
  













  
  
  

  
  
  

  

  
  <p class="powered-by copyright-license-text">
    © 2024 Hans Rutger Bosker. This work is licensed under <a href="https://creativecommons.org/licenses/by/4.0" rel="noopener noreferrer" target="_blank">CC BY 4.0</a>
  </p>
  

  <p class="powered-by footer-license-icons">
    <a href="https://creativecommons.org/licenses/by/4.0" rel="noopener noreferrer" target="_blank" aria-label="Creative Commons">
      <i class="fab fa-creative-commons fa-2x" aria-hidden="true"></i>
      <i class="fab fa-creative-commons-by fa-2x" aria-hidden="true"></i>
      
      
    </a>
  </p>





  <p class="powered-by">
    
    
    
      
      
      
      
      
      
      Published with <a href="https://hugoblox.com/?utm_campaign=poweredby" target="_blank" rel="noopener">Hugo Blox Builder</a> — the free, <a href="https://github.com/HugoBlox/hugo-blox-builder" target="_blank" rel="noopener">open source</a> website builder that empowers creators.
    
  </p>
</footer>


    </main>
  </div>
</div>

  </div>

  <div class="page-footer">
    
    
  </div>

  


<script src="/js/vendor-bundle.min.f64289d8217e08e3afcd597d60836062.js"></script>




  

  
  

  






  <script src="https://cdn.jsdelivr.net/npm/leaflet@1.7.1/dist/leaflet.min.js" integrity="" crossorigin="anonymous"></script>




<script src="https://cdn.jsdelivr.net/npm/anchor-js@5.0.0/anchor.min.js" integrity="sha256-aQmOEF2ZD4NM/xt4hthzREIo/2PFkOX/g01WjxEV7Ys=" crossorigin="anonymous"></script>
<script>
  anchors.add();
</script>





  
  <script id="search-hit-fuse-template" type="text/x-template">
    <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
    </div>
  </script>
  
    <script src="https://cdn.jsdelivr.net/gh/krisk/Fuse@v3.2.1/dist/fuse.min.js" integrity="sha512-o38bmzBGX+hD3JHWUFCDA09btWaqrNmoJ3RXLlrysA7PP01Kgs4UlE4MhelE1v5dJR3+cxlR4qQlotsW7jKsnw==" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/gh/julmot/mark.js@8.11.1/dist/jquery.mark.min.js" integrity="sha512-mhbv5DqBMgrWL+32MmsDOt/OAvqr/cHimk6B8y/bx/xS88MVkYGPiVv2ixKVrkywF2qHplNRUvFsAHUdxZ3Krg==" crossorigin="anonymous"></script>
  












  
  
  
  
  
  
  

















<script id="page-data" type="application/json">{"use_headroom":false}</script>











  
  


<script src="/en/js/wowchemy.min.ee7be7b7b2cf2cd4bb899879abb5b47b.js"></script>



  <script src="/js/wowchemy-map.a26e9d2f7238ba5b868384f1c5bc6477.js" type="module"></script>




  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        
        <pre><code></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>


  <script src="/js/wowchemy-publication.9137013a66774049159934c29c3f0205.js" type="module"></script>


















</body>
</html>
